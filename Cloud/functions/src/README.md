<div dir="rtl">
  <p align="center">
    <a href="https://asmlearn.com/"><img src="https://i.imagesup.co/images2/42354bf8b1da4e293ec1f2fe01d6c83fadf50eb8.png" width="300"></a>
  </p>
<p align="center">
   <a href="https://firebase.google.com/docs/web/setup?authuser=0#from-the-cdn/"><img src="https://img.shields.io/badge/Firebase-v7.19.0-blue"></a>
   <a href="https://nodejs.org/en/docs/"><img src="https://img.shields.io/badge/Node.js-8-lightorange"></a>
   <a href="https://expressjs.com/"><img src="https://img.shields.io/badge/ExpressJS-v4.x-lightgrey"></a>
</p>
 <h5>
   חלק זה של הפרויקט הוא ה-Backend של המערכת ומשמש לניהול המערכת בכלל, וניהול המשתמשים והמטלות בפרט. אופן מתן המענה למשתמשים מתבצע באמצעות בקשות בפרוטוקול HTTP הרצות בשרתים של חברת גוגל תחת פונקציות הענן של Firebase. 
 </h5>
  <h5>
    Firebase Cloud Functions הוא שירות המאפשר שליחת לוגיקה לשרת מרוחק בצורה של פונקציות. כל זאת מבלי לדאוג לתשתיות ולשלם רק עבור המשאבים בהם נעשה שימוש בפועל. בשיטה זו, השירות מפשט את כתיבת, תחזוקת, והפעלת קוד ה-Backend.
פונקציות הענן פועלות כמעין חתיכות לגו אותן ניתן לחבר לכל שירותי Firebase. לדוגמא, ניתן להפעיל פונקציה כאשר תמונה מועלה לאחסון Firebase על מנת ליצור תמונה ממוזערת. בנוסף, ניתן לנקות נתוני משתמש מסוימים כאשר ענף נמחק ב-Realtime Database. בצורה זו, כמעט כל עניין שמתרחש ב- Firebase יכול להפעיל פונקציה. 
יחד עם זאת, בפרויקט זה בחרתי להשתמש בשירות באמצעות הפעלתו כ-Requests HTTP תוך שימוש בפונקציות מסוגים שונים, כגון: GET, POST ועוד. כתיבת הפונקציות נעשתה בשפת TypeScript הן מורצות בענן באמצעות טכנולוגיית Node.js 8 הפועלת ביחד עם ה-Framework הפופולרי ExpressJS.
  </h5>
  <h5>על מנת להתחיל לעבוד בצד השרת יש תחילה להתקין ולאתחל את סביבת הפיתוח של Firebase במחשבך האישי. הסבר מפורט כיצד עושים זאת ניתן למצוא <a href="https://firebase.google.com/docs/functions/get-started?hl=en">כאן</a>.</h5>
  <h5>לאחר סיום ההתקנה והאתחול, יש לקבל מצוות הפיתוח הנוכחי את הרשאות הגישה לפרויקט, לאתחל את הפרויקט במחשבך האישי ולהחליף את הקובץ בנתיב המופיע מטה, לקובץ המופיע בתיעוד.</h5>
 
  ```
  YOUR_PATH/functions/src/index.ts
  ```
    
 # פירוט הפונקציות במערכת
 <h5>המערכת מורכבת ממספר רכיבים (פונקציות) אשר לכל אחת מהן חלק מרכזי הנותן מענה על צורך שנוצר בפרויקט, להלן הסבר כללי עבור כל פונקציה מה מטרתה ומה תחום האחריות שלה, פירוט מדויק של תפקידה של כל פסקת קוד תוכלו למצוא בתיעוד הקוד עצמו.</h5>
 <h5>
  <li>createTask - מטרת פונקציה זו היא להוסיף מטלות חדשות למאגר או לחילופין לעדכן מטלות קיימות. רק משתמש/ת בדרגת "מורה מאומת/ת" והילך (בסולם הדרגות ההיררכי) רשאי ויכול להשתמש בפונקציה זו. קריאה לפונקציה ללא פרמטר חיוני, ללא אימות או ללא הרשאה מתאימה תגרום לשגיאות. במידה ומתבצע נסיון עדכון מטלה קיימת בידי משתמש בעל התגית "מורה מאומת/ת" שאינו מוגדר כמחבר המטלה - הדבר יגרור שגיאה, בעוד "מנהל/ת מערכת" רשאי לערוך מטלות שאינן שלו. הפונקציה מצפה לקבל את כל הפרמטרים החיוניים המצויינים בקוד עצמו. הפונקציה בודקת את הרשאות המשתמש שקרא לה ומעדכנת בהתאם לשנתבקשה. בעת פעולתה, מתבצע עדכון של מסד הנתונים במידע החדש בעוד שהמידע הקודם נמחק באופן שאינו ניתן לשחזור לאחר מכן.</li>
  <br/>
  <li>removeTask - מטרת פונקציה זו היא להסיר מטלה קיימת מהמאגר. פונקציה זו פועלת בצורה דומה לפונקציה שהוסברה בסעיף הקודם באופן ההרשאות ובדיקתן. בנוסף, במידה ומשתמש פתר מטלה שנקראה להימחק תחת השימוש בפונקציה זו, מעקב הפתרון שכתב ימחק גם הוא מהפרופיל האישי שלו.</li>
  <br/>
  <li>submitTask - מטרת פונקציה זו היא לשלוח לצוות המנוע את הקוד אותו כתב המשתמש. הפונקציה מורצת כאשר המשתמש לוחץ על כפתור "הרצה" בסביבת העבודה באתר. בנוסף, תחת הוספת פרמטר המציין "שמירה בלבד" קריאה לפונקציה תבצע שמירה של הקוד אותו כתב המשתמש במסד הנתונים של השירות מבלי לעדכן על כך את צוות המנוע. הפונקציה פועולת בצורה אסינכרונית בין מקרי הבדיקה השונים, אותם היא מחשבת ומכינה במקביל. בעת פעילותה, הפונקציה לוקחת את קוד האסמבלי, "שואבת" מתוך מסד הנתונים את פרטי הקלט של כלל מקרי הבדיקה, מכינה את קבצי ההרצה (כמספר מקרי הבדיקה) עבור המנוע, שומרת אותם במסד האחסון של השירות ומעדכנת את צוות המנוע על סיום פעילותה על ידי הפעלת "טריגר", בצירוף הפרמטרים הנדרשים על פי הפרוטוקול, במסד הנתונים  אליו מאזין המנוע.</li>
   <br/>
  <li>getUserData - מטרת פונקציה זו היא הבאת נתונים מתוך המערכת למשתמש (שם ותמונה) של משתמש אחר. הפונקציה מקבלת מזהה יחודי של משתמש (UID - Unique/User ID) ומחזירה את שמו, כפי שמופיע במערכת, ואת תמונתו, במידה ויש לו כזו. השימוש בפונקציה נעשה בעמוד הראשי (Dashboard) כאשר נטענות מטלות לטבלת המטלות. כאשר מטלה מתקבלת, מזהה המחבר שלה מועבר לפונקציה זו לפענוח פרטיו האישיים המעודכנים ביותר לעת בה בוצעה הבקשה.</li>
   <br/>
  <li>resultFromEngine - פונקציה זו נקראת ע"י המנוע עבור כל מקרה בדיקה בנפרד ומטרתה להחזיר לפרויקט זה את תוצאות ההרצה של מקרי הבדיקה של מטלה אותה נדרשנו לבדוק, על מנת שנוכל להציגה חזרה למשתמש. הפונקציה מקבלת את הפרמטרים החיוניים לה. כגוון, מזהה המשתמש שכתב אותה, מזהה המטלה, קוד סטטוס ההרצה, פרמטר אבטחה, פלט או שגיאה (בהתאם לקוד סטטוס ההרצה) ועוד. הפונקציה בוחנת את קוד סטטוס ההרצה ופועלת לפיו. במידה וההרצה הסתיימה ללא תקלות, הפונקציה "שואבת" את פלטי מקרי הבדיקה, משווה אותם עם תוצאות ההרצה ומחזירה את התשובה למשתמש. במידה וההרצה נכשלה,  מוחזרת למשתמש הודעת השגיאה.</li>
   <br/>
  <li>getTaskPrivateInputs - מטרת פונקציה זו היא להביא מהשרת את פרטי הקלטים במקרי הבדיקה למשתמש. על מנת לעשות שימוש בפונציה זו יש להיות בעל הרשאות מתקדמות בדומה לפונקציה הראשונה שתוארה ברשימה זו. מטרתה היא להביא לעורך המטלה את פרטי הקלטים על מנת שיוכל לשנות או לערוך אותם לפי הצורך.</li>
   <br/>
  <li>פונקציות עזר - מטרת פונקציות אלה היא לפתור בעיות המקלות על אופן הצגת ההודעות ללוג, הוספת תכונות לאובייקט בשפת התכנות, ותכונות למחרוזות ומניפולציה עליהן.</li>
</h5>
</div>
